webpackJsonp([1,4],{130:function(e,t,r){"use strict";var i=r(26);r.d(t,"a",function(){return n});var n=function(){function e(){}return e.prototype.randomIntFromInterval=function(e,t){return Math.floor(Math.random()*(t-e+1)+e)},e.prototype.randomNoisyTexture=function(e){var t,r,n,o=document.createElement("canvas"),s=o.getContext("2d"),a=this.rainbowRGB(100,this.randomIntFromInterval(1,100)),e=e||.2;for(o.width=128,o.height=128,t=0;t<o.width;t++)for(r=0;r<o.height;r++)n=this.randomIntFromInterval(1,5),1===n?(s.fillStyle="rgba(1,1,1,"+e+")",s.fillRect(t,r,1,1)):(s.fillStyle="rgba("+a.r+","+a.g+","+a.b+",1)",s.fillRect(t,r,1,1));var h=new i.Texture(o);return h.needsUpdate=!0,h},e.prototype.generateNoiseTexture=function(e,t,r){var n,o,s,a=document.createElement("canvas"),h=a.getContext("2d"),r=r||.2;for(a.width=e,a.height=t,n=0;n<a.width;n++)for(o=0;o<a.height;o++)s=Math.floor(60*Math.random()),h.fillStyle="rgba("+s+","+s+","+s+","+r+")",h.fillRect(n,o,1,1);var l=new i.Texture(a);return l.needsUpdate=!0,l},e.prototype.rainbow=function(e,t){var r,i,n,o=t/e,s=~~(6*o),a=6*o-s,h=1-a;switch(s%6){case 0:r=1,i=a,n=0;break;case 1:r=h,i=1,n=0;break;case 2:r=0,i=1,n=a;break;case 3:r=0,i=h,n=1;break;case 4:r=a,i=0,n=1;break;case 5:r=1,i=0,n=h}return"#"+("00"+(~~(255*r)).toString(16)).slice(-2)+("00"+(~~(255*i)).toString(16)).slice(-2)+("00"+(~~(255*n)).toString(16)).slice(-2)},e.prototype.rainbowRGB=function(e,t){var r,i,n,o=t/e,s=~~(6*o),a=6*o-s,h=1-a;switch(s%6){case 0:r=1,i=a,n=0;break;case 1:r=h,i=1,n=0;break;case 2:r=0,i=1,n=a;break;case 3:r=0,i=h,n=1;break;case 4:r=a,i=0,n=1;break;case 5:r=1,i=0,n=h}var l="#"+("00"+(~~(255*r)).toString(16)).slice(-2)+("00"+(~~(255*i)).toString(16)).slice(-2)+("00"+(~~(255*n)).toString(16)).slice(-2);return this.hexToRgb(l)},e.prototype.hexToRgb=function(e){var t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return t?{r:parseInt(t[1],16),g:parseInt(t[2],16),b:parseInt(t[3],16)}:null},e.ctorParameters=function(){return[]},e}()},199:function(e,t,r){"use strict";var i=r(26),n=r(81),o=r(82),s=r(48),a=r(83);r.d(t,"a",function(){return u});var h=r(217)(i),l=r(360)(i),c=r(359)(i),u=function(){function e(e,t,r,n){this.cameraService=e,this.lightService=t,this.physicsService=r,this.objectsService=n,this.bloomParams={projection:"normal",background:!1,exposure:.1,threshold:.7,strength:.1,radius:10},this.clock=new i.Clock}return Object.defineProperty(e.prototype,"canvas",{get:function(){return this.canvasRef.nativeElement},enumerable:!0,configurable:!0}),e.prototype.handleKeyboardEvent=function(e){if("1"===e.key&&this.objectsService.switchScene(this.objectsService.sceneOne),"2"===e.key&&this.objectsService.switchScene(this.objectsService.sceneTwo),"s"===e.key){var t;try{var r="image/jpeg";this.renderer.setSize(3840,2160),this.cameraService.update(),this.renderer.clear(),this.renderer.render(this.scene,this.cameraService.camera),t=this.renderer.domElement.toDataURL(r),this.renderer.setSize(this.canvas.clientWidth,this.canvas.clientHeight),this.cameraService.update(),this.renderer.render(this.scene,this.cameraService.camera),this.saveFile(t.replace(r,"image/octet-stream"),"sofas.jpg")}catch(e){return void console.log(e)}}"1"===e.key||"2"===e.key||e.key},e.prototype.saveFile=function(e,t){var r=document.createElement("a");"string"==typeof r.download&&(document.body.appendChild(r),r.download=t,r.href=e,r.click(),document.body.removeChild(r))},e.prototype.onMouseUp=function(e){},e.prototype.createScene=function(){this.scene=new i.Scene,this.scene.background=new i.Color(16777215)},e.prototype.initComposer=function(e,t){void 0===e&&(e=window.innerWidth),void 0===t&&(t=window.innerHeight),console.log("Composer initializing with "+e+"x"+t),this.renderPass=new h.RenderPass(this.scene,this.cameraService.camera),this.effectFXAA=new h.ShaderPass(l),this.effectFXAA.uniforms.resolution.value.set(1/e,1/t);var r=new h.ShaderPass(h.CopyShader);r.renderToScreen=!0;var n=new i.Vector2(e,t);this.bloomPass=new c(n,this.bloomParams.strength,this.bloomParams.radius,this.bloomParams.threshold),this.composer=new h(this.renderer),this.composer.setSize(e,t),this.composer.addPass(this.renderPass),this.composer.addPass(this.effectFXAA),this.composer.addPass(this.bloomPass),this.composer.addPass(r)},e.prototype.startRendering=function(){this.renderer=new i.WebGLRenderer({canvas:this.canvas,preserveDrawingBuffer:!1,antialias:!0}),this.renderer.setPixelRatio(1),this.renderer.setSize(this.canvas.clientWidth,this.canvas.clientHeight),this.renderer.shadowMap.enabled=!0,this.renderer.shadowMap.type=i.PCFSoftShadowMap,this.renderer.gammaInput=!0,this.renderer.gammaOutput=!0,this.clock.start(),this.initComposer();var e=this;!function t(){requestAnimationFrame(t);var r=e.clock.getDelta();e.physicsService.update(r),e.cameraService.animate(r),e.objectsService.animate(r),e.renderer.clear(),e.composer.render(r)}()},e.prototype.initScene=function(){this.createScene(),this.cameraService.create(this.scene,this.canvas),this.lightService.create(this.scene),this.physicsService.init(this.scene),this.objectsService.create(this.scene),this.objectsService.activeScene=this.objectsService.sceneOne,this.startRendering()},e.prototype.ngAfterViewInit=function(){this.initScene()},e.ctorParameters=function(){return[{type:n.a},{type:o.a},{type:s.a},{type:a.a}]},e}()},218:function(e,t){function r(e){throw new Error("Cannot find module '"+e+"'.")}r.keys=function(){return[]},r.resolve=r,e.exports=r,r.id=218},219:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=r(0),n=r(293),o=r(194),s=r(288);n.a.production&&r.i(i.a)(),r.i(o.a)().bootstrapModuleFactory(s.a)},286:function(e,t,r){"use strict";r.d(t,"a",function(){return i});var i=[""]},287:function(e,t,r){"use strict";var i=r(291),n=r(106),o=r(21),s=r(63),a=r(31),h=r(28),l=r(41),c=r(73),u=r(286),_=r(199),p=r(290),m=r(81),d=r(82),f=r(48),v=r(83);r.d(t,"a",function(){return w});var g=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function i(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i)}}(),y=function(){function e(e){this._changed=!1,this.context=new i.a(e)}return e.prototype.ngOnDetach=function(e,t,r){},e.prototype.ngOnDestroy=function(){},e.prototype.ngDoCheck=function(e,t,r){var i=this._changed;return this._changed=!1,i},e.prototype.checkHost=function(e,t,r,i){},e.prototype.handleEvent=function(e,t){return!0},e.prototype.subscribe=function(e,t){this._eventHandler=t},e}(),b=o.createRenderComponentType("",0,s.b.None,[],{}),S=function(e){function t(r,i,n,o){return e.call(this,t,b,a.a.HOST,r,i,n,o,h.b.CheckAlways)||this}return g(t,e),t.prototype.createInternal=function(e){return this._el_0=o.selectOrCreateRenderHostElement(this.renderer,"app-root",o.EMPTY_INLINE_ARRAY,e,null),this.compView_0=new A(this.viewUtils,this,0,this._el_0),this._AppComponent_0_3=new y(this.injectorGet(c.a,this.parentIndex)),this.compView_0.create(this._AppComponent_0_3.context),this.init(this._el_0,this.renderer.directRenderer?null:[this._el_0],null),new l.a(0,this,this._el_0,this._AppComponent_0_3.context)},t.prototype.injectorGetInternal=function(e,t,r){return e===i.a&&0===t?this._AppComponent_0_3.context:r},t.prototype.detectChangesInternal=function(e){this._AppComponent_0_3.ngDoCheck(this,this._el_0,e),this.compView_0.internalDetectChanges(e)},t.prototype.destroyInternal=function(){this.compView_0.destroy()},t.prototype.visitRootNodesInternal=function(e,t){e(this._el_0,t)},t}(n.a),w=new l.b("app-root",S,i.a),x=[u.a],C=o.createRenderComponentType("",0,s.b.Emulated,x,{}),A=function(e){function t(r,i,n,o){return e.call(this,t,C,a.a.COMPONENT,r,i,n,o,h.b.CheckAlways)||this}return g(t,e),t.prototype.createInternal=function(e){var t=this.renderer.createViewRoot(this.parentElement);this._el_0=o.createRenderElement(this.renderer,t,"app-scene",o.EMPTY_INLINE_ARRAY,null),this.compView_0=new p.a(this.viewUtils,this,0,this._el_0),this._SceneComponent_0_3=new p.b(this.parentView.injectorGet(m.a,this.parentIndex),this.parentView.injectorGet(d.a,this.parentIndex),this.parentView.injectorGet(f.a,this.parentIndex),this.parentView.injectorGet(v.a,this.parentIndex)),this.compView_0.create(this._SceneComponent_0_3.context);var r=o.subscribeToRenderElement(this,this._el_0,new o.InlineArray2(2,"keypress","window"),this.eventHandler(this.handleEvent_0));return this.init(null,this.renderer.directRenderer?null:[this._el_0],[r]),null},t.prototype.injectorGetInternal=function(e,t,r){return e===_.a&&0===t?this._SceneComponent_0_3.context:r},t.prototype.detectChangesInternal=function(e){this._SceneComponent_0_3.ngDoCheck(this,this._el_0,e),this.compView_0.internalDetectChanges(e),e||0===this.numberOfChecks&&this._SceneComponent_0_3.context.ngAfterViewInit()},t.prototype.destroyInternal=function(){this.compView_0.destroy()},t.prototype.handleEvent_0=function(e,t){this.compView_0.markPathToRootAsCheckOnce();var r=!0;return r=this._SceneComponent_0_3.handleEvent(e,t)&&r},t}(n.a)},288:function(e,t,r){"use strict";var i=r(105),n=r(292),o=r(150),s=r(162),a=r(123),h=r(179),l=r(269),c=r(192),u=r(37),_=r(56),p=r(66),m=r(57),d=r(30),f=r(79),v=r(22),g=r(80),y=r(78),b=r(128),S=r(94),w=r(21),x=r(124),C=r(44),A=r(71),M=r(45),T=r(121),R=r(72),P=r(130),I=r(81),D=r(82),E=r(48),O=r(83),B=r(287),F=r(104),U=r(38),V=r(125),N=r(126),j=r(43),z=r(77),G=r(60),H=r(102),k=r(47),L=r(76),W=r(65),X=r(109),q=r(96),Y=r(97),Q=r(36),K=r(73);r.d(t,"a",function(){return $});var J=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function i(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i)}}(),Z=function(e){function t(t){return e.call(this,t,[B.a],[B.a])||this}return J(t,e),Object.defineProperty(t.prototype,"_LOCALE_ID_7",{get:function(){return null==this.__LOCALE_ID_7&&(this.__LOCALE_ID_7=s.a(this.parent.get(F.a,null))),this.__LOCALE_ID_7},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"_NgLocalization_8",{get:function(){return null==this.__NgLocalization_8&&(this.__NgLocalization_8=new u.a(this._LOCALE_ID_7)),this.__NgLocalization_8},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"_ApplicationRef_13",{get:function(){return null==this.__ApplicationRef_13&&(this.__ApplicationRef_13=this._ApplicationRef__12),this.__ApplicationRef_13},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"_Compiler_14",{get:function(){return null==this.__Compiler_14&&(this.__Compiler_14=new d.a),this.__Compiler_14},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"_APP_ID_15",{get:function(){return null==this.__APP_ID_15&&(this.__APP_ID_15=U.a()),this.__APP_ID_15},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"_DOCUMENT_16",{get:function(){return null==this.__DOCUMENT_16&&(this.__DOCUMENT_16=a.a()),this.__DOCUMENT_16},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"_HAMMER_GESTURE_CONFIG_17",{get:function(){return null==this.__HAMMER_GESTURE_CONFIG_17&&(this.__HAMMER_GESTURE_CONFIG_17=new f.a),this.__HAMMER_GESTURE_CONFIG_17},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"_EVENT_MANAGER_PLUGINS_18",{get:function(){return null==this.__EVENT_MANAGER_PLUGINS_18&&(this.__EVENT_MANAGER_PLUGINS_18=[new V.a,new N.a,new f.b(this._HAMMER_GESTURE_CONFIG_17)]),this.__EVENT_MANAGER_PLUGINS_18},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"_EventManager_19",{get:function(){return null==this.__EventManager_19&&(this.__EventManager_19=new v.a(this._EVENT_MANAGER_PLUGINS_18,this.parent.get(j.a))),this.__EventManager_19},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"_AnimationDriver_21",{get:function(){return null==this.__AnimationDriver_21&&(this.__AnimationDriver_21=a.b()),this.__AnimationDriver_21},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"_DomRootRenderer_22",{get:function(){return null==this.__DomRootRenderer_22&&(this.__DomRootRenderer_22=new y.a(this._DOCUMENT_16,this._EventManager_19,this._DomSharedStylesHost_20,this._AnimationDriver_21,this._APP_ID_15)),this.__DomRootRenderer_22},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"_RootRenderer_23",{get:function(){return null==this.__RootRenderer_23&&(this.__RootRenderer_23=z.a(this._DomRootRenderer_22,this.parent.get(z.b,null),this.parent.get(m.a,null))),this.__RootRenderer_23},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"_DomSanitizer_24",{get:function(){return null==this.__DomSanitizer_24&&(this.__DomSanitizer_24=new b.a),this.__DomSanitizer_24},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"_Sanitizer_25",{get:function(){return null==this.__Sanitizer_25&&(this.__Sanitizer_25=this._DomSanitizer_24),this.__Sanitizer_25},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"_AnimationQueue_26",{get:function(){return null==this.__AnimationQueue_26&&(this.__AnimationQueue_26=new S.a(this.parent.get(j.a))),this.__AnimationQueue_26},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"_ViewUtils_27",{get:function(){return null==this.__ViewUtils_27&&(this.__ViewUtils_27=new w.ViewUtils(this._RootRenderer_23,this._Sanitizer_25,this._AnimationQueue_26)),this.__ViewUtils_27},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"_IterableDiffers_28",{get:function(){return null==this.__IterableDiffers_28&&(this.__IterableDiffers_28=s.b()),this.__IterableDiffers_28},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"_KeyValueDiffers_29",{get:function(){return null==this.__KeyValueDiffers_29&&(this.__KeyValueDiffers_29=s.c()),this.__KeyValueDiffers_29},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"_SharedStylesHost_30",{get:function(){return null==this.__SharedStylesHost_30&&(this.__SharedStylesHost_30=this._DomSharedStylesHost_20),this.__SharedStylesHost_30},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"_Title_31",{get:function(){return null==this.__Title_31&&(this.__Title_31=new x.a),this.__Title_31},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"_RadioControlRegistry_32",{get:function(){return null==this.__RadioControlRegistry_32&&(this.__RadioControlRegistry_32=new C.a),this.__RadioControlRegistry_32},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"_BrowserXhr_33",{get:function(){return null==this.__BrowserXhr_33&&(this.__BrowserXhr_33=new A.a),this.__BrowserXhr_33},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"_ResponseOptions_34",{get:function(){return null==this.__ResponseOptions_34&&(this.__ResponseOptions_34=new M.a),this.__ResponseOptions_34},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"_XSRFStrategy_35",{get:function(){return null==this.__XSRFStrategy_35&&(this.__XSRFStrategy_35=c.a()),this.__XSRFStrategy_35},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"_XHRBackend_36",{get:function(){return null==this.__XHRBackend_36&&(this.__XHRBackend_36=new T.a(this._BrowserXhr_33,this._ResponseOptions_34,this._XSRFStrategy_35)),this.__XHRBackend_36},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"_RequestOptions_37",{get:function(){return null==this.__RequestOptions_37&&(this.__RequestOptions_37=new R.a),this.__RequestOptions_37},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"_Http_38",{get:function(){return null==this.__Http_38&&(this.__Http_38=c.b(this._XHRBackend_36,this._RequestOptions_37)),this.__Http_38},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"_UtilsService_39",{get:function(){return null==this.__UtilsService_39&&(this.__UtilsService_39=new P.a),this.__UtilsService_39},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"_CameraService_40",{get:function(){return null==this.__CameraService_40&&(this.__CameraService_40=new I.a(this._UtilsService_39)),this.__CameraService_40},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"_LightService_41",{get:function(){return null==this.__LightService_41&&(this.__LightService_41=new D.a),this.__LightService_41},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"_PhysicsService_42",{get:function(){return null==this.__PhysicsService_42&&(this.__PhysicsService_42=new E.a),this.__PhysicsService_42},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"_ObjectsService_43",{get:function(){return null==this.__ObjectsService_43&&(this.__ObjectsService_43=new O.a(this._UtilsService_39,this._PhysicsService_42)),this.__ObjectsService_43},enumerable:!0,configurable:!0}),t.prototype.createInternal=function(){return this._CommonModule_0=new o.a,this._ApplicationModule_1=new s.d,this._BrowserModule_2=new a.c(this.parent.get(a.c,null)),this._InternalFormsSharedModule_3=new h.a,this._FormsModule_4=new l.a,this._HttpModule_5=new c.c,this._AppModule_6=new n.a,this._ErrorHandler_9=a.d(),this._ApplicationInitStatus_10=new _.a(this.parent.get(_.b,null)),this._Testability_11=new p.a(this.parent.get(j.a)),this._ApplicationRef__12=new m.b(this.parent.get(j.a),this.parent.get(G.a),this,this._ErrorHandler_9,this,this._ApplicationInitStatus_10,this.parent.get(p.b,null),this._Testability_11),this._DomSharedStylesHost_20=new g.a(this._DOCUMENT_16),this._AppModule_6},t.prototype.getInternal=function(e,t){return e===o.a?this._CommonModule_0:e===s.d?this._ApplicationModule_1:e===a.c?this._BrowserModule_2:e===h.a?this._InternalFormsSharedModule_3:e===l.a?this._FormsModule_4:e===c.c?this._HttpModule_5:e===n.a?this._AppModule_6:e===F.a?this._LOCALE_ID_7:e===u.b?this._NgLocalization_8:e===H.a?this._ErrorHandler_9:e===_.a?this._ApplicationInitStatus_10:e===p.a?this._Testability_11:e===m.b?this._ApplicationRef__12:e===m.c?this._ApplicationRef_13:e===d.a?this._Compiler_14:e===U.b?this._APP_ID_15:e===k.a?this._DOCUMENT_16:e===f.c?this._HAMMER_GESTURE_CONFIG_17:e===v.b?this._EVENT_MANAGER_PLUGINS_18:e===v.a?this._EventManager_19:e===g.a?this._DomSharedStylesHost_20:e===L.a?this._AnimationDriver_21:e===y.b?this._DomRootRenderer_22:e===W.a?this._RootRenderer_23:e===b.b?this._DomSanitizer_24:e===X.a?this._Sanitizer_25:e===S.a?this._AnimationQueue_26:e===w.ViewUtils?this._ViewUtils_27:e===q.a?this._IterableDiffers_28:e===Y.a?this._KeyValueDiffers_29:e===g.b?this._SharedStylesHost_30:e===x.a?this._Title_31:e===C.a?this._RadioControlRegistry_32:e===A.a?this._BrowserXhr_33:e===M.b?this._ResponseOptions_34:e===Q.a?this._XSRFStrategy_35:e===T.a?this._XHRBackend_36:e===R.b?this._RequestOptions_37:e===K.a?this._Http_38:e===P.a?this._UtilsService_39:e===I.a?this._CameraService_40:e===D.a?this._LightService_41:e===E.a?this._PhysicsService_42:e===O.a?this._ObjectsService_43:t},t.prototype.destroyInternal=function(){this._ApplicationRef__12.ngOnDestroy(),this._DomSharedStylesHost_20.ngOnDestroy()},t}(i.a),$=new i.b(Z,n.a)},289:function(e,t,r){"use strict";r.d(t,"a",function(){return i});var i=[""]},290:function(e,t,r){"use strict";var i=r(199),n=r(106),o=r(21),s=r(63),a=r(31),h=r(28),l=r(41),c=r(81),u=r(82),_=r(48),p=r(83),m=r(289),d=r(170),f=r(42);r.d(t,"b",function(){return g}),r.d(t,"a",function(){return x});var v=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function i(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i)}}(),g=function(){function e(e,t,r,n){this._changed=!1,this.context=new i.a(e,t,r,n)}return e.prototype.ngOnDetach=function(e,t,r){},e.prototype.ngOnDestroy=function(){},e.prototype.ngDoCheck=function(e,t,r){var i=this._changed;return this._changed=!1,i},e.prototype.checkHost=function(e,t,r,i){},e.prototype.handleEvent=function(e,t){var r=!0;if("window:keypress"==e){r=this.context.handleKeyboardEvent(t)!==!1&&r}return r},e.prototype.subscribe=function(e,t){this._eventHandler=t},e}(),y=o.createRenderComponentType("",0,s.b.None,[],{}),b=function(e){function t(r,i,n,o){return e.call(this,t,y,a.a.HOST,r,i,n,o,h.b.CheckAlways)||this}return v(t,e),t.prototype.createInternal=function(e){this._el_0=o.selectOrCreateRenderHostElement(this.renderer,"app-scene",o.EMPTY_INLINE_ARRAY,e,null),this.compView_0=new x(this.viewUtils,this,0,this._el_0),this._SceneComponent_0_3=new g(this.injectorGet(c.a,this.parentIndex),this.injectorGet(u.a,this.parentIndex),this.injectorGet(_.a,this.parentIndex),this.injectorGet(p.a,this.parentIndex)),this.compView_0.create(this._SceneComponent_0_3.context);var t=o.subscribeToRenderElement(this,this._el_0,new o.InlineArray2(2,"keypress","window"),this.eventHandler(this.handleEvent_0));return this.init(this._el_0,this.renderer.directRenderer?null:[this._el_0],[t]),new l.a(0,this,this._el_0,this._SceneComponent_0_3.context)},t.prototype.injectorGetInternal=function(e,t,r){return e===i.a&&0===t?this._SceneComponent_0_3.context:r},t.prototype.detectChangesInternal=function(e){this._SceneComponent_0_3.ngDoCheck(this,this._el_0,e),this.compView_0.internalDetectChanges(e),e||0===this.numberOfChecks&&this._SceneComponent_0_3.context.ngAfterViewInit()},t.prototype.destroyInternal=function(){this.compView_0.destroy()},t.prototype.visitRootNodesInternal=function(e,t){e(this._el_0,t)},t.prototype.handleEvent_0=function(e,t){this.compView_0.markPathToRootAsCheckOnce();var r=!0;return r=this._SceneComponent_0_3.handleEvent(e,t)&&r},t}(n.a),S=(new l.b("app-scene",b,i.a),[m.a]),w=o.createRenderComponentType("",0,s.b.Emulated,S,{}),x=function(e){function t(r,i,n,o){return e.call(this,t,w,a.a.COMPONENT,r,i,n,o,h.b.CheckAlways)||this}return v(t,e),t.prototype.createInternal=function(e){var t=this.renderer.createViewRoot(this.parentElement);this._viewQuery_canvas_0=new d.a,this._el_0=o.createRenderElement(this.renderer,t,"canvas",o.EMPTY_INLINE_ARRAY,null);var r=o.subscribeToRenderElement(this,this._el_0,new o.InlineArray2(2,"mouseup",null),this.eventHandler(this.handleEvent_0));return this._viewQuery_canvas_0.reset([new f.a(this._el_0)]),this.context.canvasRef=this._viewQuery_canvas_0.first,this.init(null,this.renderer.directRenderer?null:[this._el_0],[r]),null},t.prototype.handleEvent_0=function(e,t){this.markPathToRootAsCheckOnce();var r=!0;if("mouseup"==e){r=this.context.onMouseUp(t)!==!1&&r}return r},t}(n.a)},291:function(e,t,r){"use strict";var i=r(270),n=r(350);r.n(n);r.d(t,"a",function(){return o});var o=function(){function e(e){this.http=e,this.title="app works!"}return e.prototype.handleError=function(e){return console.error("An error occurred",e),Promise.reject(e.message||e)},e.ctorParameters=function(){return[{type:i.a}]},e}()},292:function(e,t,r){"use strict";r.d(t,"a",function(){return i});var i=function(){function e(){}return e}()},293:function(e,t,r){"use strict";r.d(t,"a",function(){return i});var i={production:!0}},359:function(e,t,r){e.exports=function(e){function t(t,r,o,s){this.strength=void 0!==r?r:1,this.radius=o,this.threshold=s,this.resolution=void 0!==t?new e.Vector2(t.x,t.y):new e.Vector2(256,256);var a={minFilter:e.LinearFilter,magFilter:e.LinearFilter,format:e.RGBAFormat};this.renderTargetsHorizontal=[],this.renderTargetsVertical=[],this.nMips=5;var h=Math.round(this.resolution.x/2),l=Math.round(this.resolution.y/2);this.renderTargetBright=new e.WebGLRenderTarget(h,l,a),this.renderTargetBright.texture.generateMipmaps=!1;for(var c=0;c<this.nMips;c++){var u=new e.WebGLRenderTarget(h,l,a);u.texture.generateMipmaps=!1,this.renderTargetsHorizontal.push(u);var u=new e.WebGLRenderTarget(h,l,a);u.texture.generateMipmaps=!1,this.renderTargetsVertical.push(u),h=Math.round(h/2),l=Math.round(l/2)}void 0===n&&console.error("UnrealBloomPass relies on LuminosityHighPassShader");var _=n;this.highPassUniforms=e.UniformsUtils.clone(_.uniforms),this.highPassUniforms.luminosityThreshold.value=s,this.highPassUniforms.smoothWidth.value=.01,this.materialHighPassFilter=new e.ShaderMaterial({uniforms:this.highPassUniforms,vertexShader:_.vertexShader,fragmentShader:_.fragmentShader,defines:{}}),this.separableBlurMaterials=[];for(var p=[3,5,7,9,11],h=Math.round(this.resolution.x/2),l=Math.round(this.resolution.y/2),c=0;c<this.nMips;c++)this.separableBlurMaterials.push(this.getSeperableBlurMaterial(p[c])),this.separableBlurMaterials[c].uniforms.texSize.value=new e.Vector2(h,l),h=Math.round(h/2),l=Math.round(l/2);this.compositeMaterial=this.getCompositeMaterial(this.nMips),this.compositeMaterial.uniforms.blurTexture1.value=this.renderTargetsVertical[0].texture,this.compositeMaterial.uniforms.blurTexture2.value=this.renderTargetsVertical[1].texture,this.compositeMaterial.uniforms.blurTexture3.value=this.renderTargetsVertical[2].texture,this.compositeMaterial.uniforms.blurTexture4.value=this.renderTargetsVertical[3].texture,this.compositeMaterial.uniforms.blurTexture5.value=this.renderTargetsVertical[4].texture,this.compositeMaterial.uniforms.bloomStrength.value=r,this.compositeMaterial.uniforms.bloomRadius.value=.1,this.compositeMaterial.needsUpdate=!0;var m=[1,.8,.6,.4,.2];this.compositeMaterial.uniforms.bloomFactors.value=m,this.bloomTintColors=[new e.Vector3(1,1,1),new e.Vector3(1,1,1),new e.Vector3(1,1,1),new e.Vector3(1,1,1),new e.Vector3(1,1,1)],this.compositeMaterial.uniforms.bloomTintColors.value=this.bloomTintColors,void 0===i.CopyShader&&console.error("BloomPass relies on EffectComposer.CopyShader");var d=i.CopyShader;this.copyUniforms=e.UniformsUtils.clone(d.uniforms),this.copyUniforms.opacity.value=1,this.materialCopy=new e.ShaderMaterial({uniforms:this.copyUniforms,vertexShader:d.vertexShader,fragmentShader:d.fragmentShader,blending:e.AdditiveBlending,depthTest:!1,depthWrite:!1,transparent:!0}),this.enabled=!0,this.needsSwap=!1,this.oldClearColor=new e.Color,this.oldClearAlpha=1,this.camera=new e.OrthographicCamera(-1,1,1,-1,0,1),this.scene=new e.Scene,this.quad=new e.Mesh(new e.PlaneBufferGeometry(2,2),null),this.scene.add(this.quad)}var i=r(217)(e),n=r(361)(e);return t.prototype={constructor:t,dispose:function(){for(var e=0;e<this.renderTargetsHorizontal.length();e++)this.renderTargetsHorizontal[e].dispose();for(var e=0;e<this.renderTargetsVertical.length();e++)this.renderTargetsVertical[e].dispose();this.renderTargetBright.dispose()},setSize:function(t,r){var i=Math.round(t/2),n=Math.round(r/2);this.renderTargetBright.setSize(i,n);for(var o=0;o<this.nMips;o++)this.renderTargetsHorizontal[o].setSize(i,n),this.renderTargetsVertical[o].setSize(i,n),this.separableBlurMaterials[o].uniforms.texSize.value=new e.Vector2(i,n),i=Math.round(i/2),n=Math.round(n/2)},render:function(r,i,n,o,s){this.oldClearColor.copy(r.getClearColor()),this.oldClearAlpha=r.getClearAlpha();var a=r.autoClear;r.autoClear=!1,r.setClearColor(new e.Color(0,0,0),0),s&&r.context.disable(r.context.STENCIL_TEST),this.highPassUniforms.tDiffuse.value=n.texture,this.highPassUniforms.luminosityThreshold.value=this.threshold,this.quad.material=this.materialHighPassFilter,r.render(this.scene,this.camera,this.renderTargetBright,!0);for(var h=this.renderTargetBright,l=0;l<this.nMips;l++)this.quad.material=this.separableBlurMaterials[l],this.separableBlurMaterials[l].uniforms.colorTexture.value=h.texture,this.separableBlurMaterials[l].uniforms.direction.value=t.BlurDirectionX,r.render(this.scene,this.camera,this.renderTargetsHorizontal[l],!0),this.separableBlurMaterials[l].uniforms.colorTexture.value=this.renderTargetsHorizontal[l].texture,this.separableBlurMaterials[l].uniforms.direction.value=t.BlurDirectionY,r.render(this.scene,this.camera,this.renderTargetsVertical[l],!0),h=this.renderTargetsVertical[l];this.quad.material=this.compositeMaterial,this.compositeMaterial.uniforms.bloomStrength.value=this.strength,this.compositeMaterial.uniforms.bloomRadius.value=this.radius,this.compositeMaterial.uniforms.bloomTintColors.value=this.bloomTintColors,r.render(this.scene,this.camera,this.renderTargetsHorizontal[0],!0),this.quad.material=this.materialCopy,this.copyUniforms.tDiffuse.value=this.renderTargetsHorizontal[0].texture,s&&r.context.enable(r.context.STENCIL_TEST),r.render(this.scene,this.camera,n,!1),r.setClearColor(this.oldClearColor,this.oldClearAlpha),r.autoClear=a},getSeperableBlurMaterial:function(t){return new e.ShaderMaterial({defines:{KERNEL_RADIUS:t,SIGMA:t},uniforms:{colorTexture:{value:null},texSize:{value:new e.Vector2(.5,.5)},direction:{value:new e.Vector2(.5,.5)}},vertexShader:"varying vec2 vUv;\n                    void main() {\n                        vUv = uv;\n                        gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n                    }",fragmentShader:"#include <common>                    varying vec2 vUv;\n                    uniform sampler2D colorTexture;\n                    uniform vec2 texSize;                    uniform vec2 direction;                                        float gaussianPdf(in float x, in float sigma) {                        return 0.39894 * exp( -0.5 * x * x/( sigma * sigma))/sigma;                    }                    void main() {\n                        vec2 invSize = 1.0 / texSize;                        float fSigma = float(SIGMA);                        float weightSum = gaussianPdf(0.0, fSigma);                        vec3 diffuseSum = texture2D( colorTexture, vUv).rgb * weightSum;                        for( int i = 1; i < KERNEL_RADIUS; i ++ ) {                            float x = float(i);                            float w = gaussianPdf(x, fSigma);                            vec2 uvOffset = direction * invSize * x;                            vec3 sample1 = texture2D( colorTexture, vUv + uvOffset).rgb;                            vec3 sample2 = texture2D( colorTexture, vUv - uvOffset).rgb;                            diffuseSum += (sample1 + sample2) * w;                            weightSum += 2.0 * w;                        }                        gl_FragColor = vec4(diffuseSum/weightSum, 1.0);\n                    }"})},getCompositeMaterial:function(t){return new e.ShaderMaterial({defines:{NUM_MIPS:t},uniforms:{blurTexture1:{value:null},blurTexture2:{value:null},blurTexture3:{value:null},blurTexture4:{value:null},blurTexture5:{value:null},dirtTexture:{value:null},bloomStrength:{value:1},bloomFactors:{value:null},bloomTintColors:{value:null},bloomRadius:{value:0}},vertexShader:"varying vec2 vUv;\n                    void main() {\n                        vUv = uv;\n                        gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n                    }",fragmentShader:"varying vec2 vUv;                    uniform sampler2D blurTexture1;                    uniform sampler2D blurTexture2;                    uniform sampler2D blurTexture3;                    uniform sampler2D blurTexture4;                    uniform sampler2D blurTexture5;                    uniform sampler2D dirtTexture;                    uniform float bloomStrength;                    uniform float bloomRadius;                    uniform float bloomFactors[NUM_MIPS];                    uniform vec3 bloomTintColors[NUM_MIPS];                                        float lerpBloomFactor(const in float factor) {                         float mirrorFactor = 1.2 - factor;                        return mix(factor, mirrorFactor, bloomRadius);                    }                                        void main() {                        gl_FragColor = bloomStrength * ( lerpBloomFactor(bloomFactors[0]) * vec4(bloomTintColors[0], 1.0) * texture2D(blurTexture1, vUv) +                                                     lerpBloomFactor(bloomFactors[1]) * vec4(bloomTintColors[1], 1.0) * texture2D(blurTexture2, vUv) +                                                     lerpBloomFactor(bloomFactors[2]) * vec4(bloomTintColors[2], 1.0) * texture2D(blurTexture3, vUv) +                                                     lerpBloomFactor(bloomFactors[3]) * vec4(bloomTintColors[3], 1.0) * texture2D(blurTexture4, vUv) +                                                     lerpBloomFactor(bloomFactors[4]) * vec4(bloomTintColors[4], 1.0) * texture2D(blurTexture5, vUv) );                    }"})}},t.BlurDirectionX=new e.Vector2(1,0),t.BlurDirectionY=new e.Vector2(0,1),t}},360:function(e,t){e.exports=function(e){return{uniforms:{tDiffuse:{value:null},resolution:{value:new e.Vector2(1/1024,1/512)}},vertexShader:["void main() {","gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["uniform sampler2D tDiffuse;","uniform vec2 resolution;","#define FXAA_REDUCE_MIN   (1.0/128.0)","#define FXAA_REDUCE_MUL   (1.0/8.0)","#define FXAA_SPAN_MAX     8.0","void main() {","vec3 rgbNW = texture2D( tDiffuse, ( gl_FragCoord.xy + vec2( -1.0, -1.0 ) ) * resolution ).xyz;","vec3 rgbNE = texture2D( tDiffuse, ( gl_FragCoord.xy + vec2( 1.0, -1.0 ) ) * resolution ).xyz;","vec3 rgbSW = texture2D( tDiffuse, ( gl_FragCoord.xy + vec2( -1.0, 1.0 ) ) * resolution ).xyz;","vec3 rgbSE = texture2D( tDiffuse, ( gl_FragCoord.xy + vec2( 1.0, 1.0 ) ) * resolution ).xyz;","vec4 rgbaM  = texture2D( tDiffuse,  gl_FragCoord.xy  * resolution );","vec3 rgbM  = rgbaM.xyz;","vec3 luma = vec3( 0.299, 0.587, 0.114 );","float lumaNW = dot( rgbNW, luma );","float lumaNE = dot( rgbNE, luma );","float lumaSW = dot( rgbSW, luma );","float lumaSE = dot( rgbSE, luma );","float lumaM  = dot( rgbM,  luma );","float lumaMin = min( lumaM, min( min( lumaNW, lumaNE ), min( lumaSW, lumaSE ) ) );","float lumaMax = max( lumaM, max( max( lumaNW, lumaNE) , max( lumaSW, lumaSE ) ) );","vec2 dir;","dir.x = -((lumaNW + lumaNE) - (lumaSW + lumaSE));","dir.y =  ((lumaNW + lumaSW) - (lumaNE + lumaSE));","float dirReduce = max( ( lumaNW + lumaNE + lumaSW + lumaSE ) * ( 0.25 * FXAA_REDUCE_MUL ), FXAA_REDUCE_MIN );","float rcpDirMin = 1.0 / ( min( abs( dir.x ), abs( dir.y ) ) + dirReduce );","dir = min( vec2( FXAA_SPAN_MAX,  FXAA_SPAN_MAX),","max( vec2(-FXAA_SPAN_MAX, -FXAA_SPAN_MAX),","dir * rcpDirMin)) * resolution;","vec4 rgbA = (1.0/2.0) * (","texture2D(tDiffuse,  gl_FragCoord.xy  * resolution + dir * (1.0/3.0 - 0.5)) +","texture2D(tDiffuse,  gl_FragCoord.xy  * resolution + dir * (2.0/3.0 - 0.5)));","vec4 rgbB = rgbA * (1.0/2.0) + (1.0/4.0) * (","texture2D(tDiffuse,  gl_FragCoord.xy  * resolution + dir * (0.0/3.0 - 0.5)) +","texture2D(tDiffuse,  gl_FragCoord.xy  * resolution + dir * (3.0/3.0 - 0.5)));","float lumaB = dot(rgbB, vec4(luma, 0.0));","if ( ( lumaB < lumaMin ) || ( lumaB > lumaMax ) ) {","gl_FragColor = rgbA;","} else {","gl_FragColor = rgbB;","}","}"].join("\n")}}},361:function(e,t){e.exports=function(e){return{shaderID:"luminosityHighPass",uniforms:{tDiffuse:{type:"t",value:null},luminosityThreshold:{type:"f",value:1},smoothWidth:{type:"f",value:1},defaultColor:{type:"c",value:new e.Color(0)},defaultOpacity:{type:"f",value:0}},vertexShader:["varying vec2 vUv;","void main() {","vUv = uv;","gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["uniform sampler2D tDiffuse;","uniform vec3 defaultColor;","uniform float defaultOpacity;","uniform float luminosityThreshold;","uniform float smoothWidth;","varying vec2 vUv;","void main() {","vec4 texel = texture2D( tDiffuse, vUv );","vec3 luma = vec3( 0.299, 0.587, 0.114 );","float v = dot( texel.xyz, luma );","vec4 outputColor = vec4( defaultColor.rgb, defaultOpacity );","float alpha = smoothstep( luminosityThreshold, luminosityThreshold + smoothWidth, v );","gl_FragColor = mix( outputColor, texel, alpha );","}"].join("\n")}}},369:function(e,t,r){e.exports=r(219)},48:function(e,t,r){"use strict";var i=r(26),n=r(294);r.n(n);r.d(t,"a",function(){return o});var o=function(){function e(){this.rigidBodies=[],this.softBodies=[],this.gravityConstant=-9.8,this.margin=.01,this.transformAux1=new Ammo.btTransform,this.softBodyHelpers=new Ammo.btSoftBodyHelpers,this.clearing=!1}return e.prototype.changeGravity=function(e){this.gravityConstant=e,this.physicsWorld.setGravity(new Ammo.btVector3(0,this.gravityConstant,0)),this.physicsWorld.getWorldInfo().set_m_gravity(new Ammo.btVector3(0,this.gravityConstant,0))},e.prototype.init=function(e){this.scene=e,this.collisionConfiguration=new Ammo.btSoftBodyRigidBodyCollisionConfiguration,this.dispatcher=new Ammo.btCollisionDispatcher(this.collisionConfiguration),this.broadphase=new Ammo.btDbvtBroadphase,this.solver=new Ammo.btSequentialImpulseConstraintSolver,this.softBodySolver=new Ammo.btDefaultSoftBodySolver,this.physicsWorld=new Ammo.btSoftRigidDynamicsWorld(this.dispatcher,this.broadphase,this.solver,this.collisionConfiguration,this.softBodySolver),this.physicsWorld.setGravity(new Ammo.btVector3(0,this.gravityConstant,0)),this.physicsWorld.getWorldInfo().set_m_gravity(new Ammo.btVector3(0,this.gravityConstant,0))},e.prototype.processGeometry=function(e){var t=(new i.Geometry).fromBufferGeometry(e),r=(t.mergeVertices(),this.createIndexedBufferGeometryFromGeometry(t));this.mapIndices(e,r)},e.prototype.createIndexedBufferGeometryFromGeometry=function(e){for(var t=e.vertices.length,r=e.faces.length,n=new i.BufferGeometry,o=new Float32Array(3*t),s=new(3*r>65535?Uint32Array:Uint16Array)(3*r),a=0;a<t;a++){var h=e.vertices[a],l=3*a;o[l]=h.x,o[l+1]=h.y,o[l+2]=h.z}for(var a=0;a<r;a++){var c=e.faces[a],l=3*a;s[l]=c.a,s[l+1]=c.b,s[l+2]=c.c}return n.setIndex(new i.BufferAttribute(s,1)),n.addAttribute("position",new i.BufferAttribute(o,3)),n},e.prototype.isEqual=function(e,t,r,i,n,o){var s=1e-6;return Math.abs(i-e)<s&&Math.abs(n-t)<s&&Math.abs(o-r)<s},e.prototype.mapIndices=function(e,t){var r=e.attributes.position.array,i=t.attributes.position.array,n=t.index.array,o=i.length/3,s=r.length/3;e.ammoVertices=i,e.ammoIndices=n,e.ammoIndexAssociation=[];for(var a=0;a<o;a++){var h=[];e.ammoIndexAssociation.push(h);for(var l=3*a,c=0;c<s;c++){var u=3*c;this.isEqual(i[l],i[l+1],i[l+2],r[u],r[u+1],r[u+2])&&h.push(u)}}},e.prototype.createSoftVolume=function(e,t,r,n,o,s,a){this.processGeometry(e);var h=new i.Mesh(e,t);h.castShadow=!0,h.receiveShadow=!0,h.frustumCulled=!1,this.scene.add(h);var l=this.softBodyHelpers.CreateFromTriMesh(this.physicsWorld.getWorldInfo(),e.ammoVertices,e.ammoIndices,e.ammoIndices.length/3,!0),c=l.get_m_cfg();return c.set_viterations(40),c.set_piterations(40),c.set_collisions(17),c.set_kDF(o),c.set_kDP(s),c.set_kPR(n),l.get_m_materials().at(0).set_m_kLST(a),l.get_m_materials().at(0).set_m_kAST(a),l.setTotalMass(r,!1),Ammo.castObject(l,Ammo.btCollisionObject).getCollisionShape().setMargin(20*this.margin),this.physicsWorld.addSoftBody(l,1,-1),h.userData.physicsBody=l,l.setActivationState(4),this.softBodies.push(h),h},e.prototype.createParalellepiped=function(e,t,r,n,o,s,a){var h=new i.BoxGeometry(e,t,r,1,1,1),l=new i.Mesh(h,a);l.position.copy(o),l.rotation.set(s.x,s.y,s.z);var c=new Ammo.btBoxShape(new Ammo.btVector3(.5*e,.5*t,.5*r));return c.setMargin(this.margin),this.createRigidBody(l,c,n,o,s),l},e.prototype.createRigidBody=function(e,t,r,i,n){var o=new Ammo.btTransform;o.setIdentity(),o.setOrigin(new Ammo.btVector3(i.x,i.y,i.z)),o.setRotation(new Ammo.btQuaternion(n.x,n.y,n.z,n.w));var s=new Ammo.btDefaultMotionState(o),a=new Ammo.btVector3(0,0,0);t.calculateLocalInertia(r,a);var h=new Ammo.btRigidBodyConstructionInfo(r,s,t,a);h.m_friction=100;var l=new Ammo.btRigidBody(h);return e.userData.physicsBody=l,this.scene.add(e),r>0&&(this.rigidBodies.push(e),l.setActivationState(4)),this.physicsWorld.addRigidBody(l),l},e.prototype.createFromJsonSoft=function(e,t,r,n,o,s){var a=(new i.BufferGeometry).fromGeometry(e);this.processGeometry(a);var h=new i.Mesh(a,t);h.castShadow=!0,h.receiveShadow=!0,h.frustumCulled=!1,h.position.copy(n),h.rotation.set(o.x,o.y,o.z),this.scene.add(h);var l=this.softBodyHelpers.CreateFromTriMesh(this.physicsWorld.getWorldInfo(),a.ammoVertices,a.ammoIndices,a.ammoIndices.length/3,!0),c=l.get_m_cfg();return c.set_viterations(40),c.set_piterations(40),c.set_collisions(17),c.set_kDF(s.friction),c.set_kDP(s.damping),c.set_kPR(s.pressure),l.get_m_materials().at(0).set_m_kLST(s.stiffness),l.get_m_materials().at(0).set_m_kAST(s.stiffness),l.setTotalMass(r,!1),Ammo.castObject(l,Ammo.btCollisionObject).getCollisionShape().setMargin(10*this.margin),this.physicsWorld.addSoftBody(l,1,-1),h.userData.physicsBody=l,l.setActivationState(4),this.softBodies.push(h),h},e.prototype.createFromJson=function(e,t,r,i,n){var o;return o=t?this.ThreeMesh2AmmoShape(t):this.ThreeMesh2AmmoShape(e),o.setMargin(this.margin),this.createRigidBody(e,o,r,i,n),e},e.prototype.ThreeMesh2AmmoShape=function(e){var t=[];e instanceof i.Group?t=e.children:t.push(e);var r,n,o,s,a=[];for(n=0;n<t.length;n++)for(o=t[n].geometry.vertices,r=0;r<t[n].geometry.faces.length;r++){var s=t[n].geometry.faces[r];s instanceof i.Face3&&a.push([{x:o[s.a].x,y:o[s.a].y,z:o[s.a].z},{x:o[s.b].x,y:o[s.b].y,z:o[s.b].z},{x:o[s.c].x,y:o[s.c].y,z:o[s.c].z}])}var h,l=new Ammo.btTriangleMesh,c=new Ammo.btConvexHullShape,u=new Ammo.btVector3(0,0,0),_=new Ammo.btVector3(0,0,0),p=new Ammo.btVector3(0,0,0);for(r=0;r<a.length;r++)h=a[r],u.setX(h[0].x),u.setY(h[0].y),u.setZ(h[0].z),c.addPoint(u,!0),_.setX(h[1].x),_.setY(h[1].y),_.setZ(h[1].z),c.addPoint(_,!0),p.setX(h[2].x),p.setY(h[2].y),p.setZ(h[2].z),c.addPoint(p,!0),l.addTriangle(u,_,p,!0);return new Ammo.btConvexTriangleMeshShape(l,!0)},e.prototype.update=function(e){if(!this.clearing){this.physicsWorld.stepSimulation(e,10);for(var t=0,r=this.softBodies.length;t<r;t++){for(var i=this.softBodies[t],n=i.geometry,o=i.userData.physicsBody,s=n.attributes.position.array,a=n.attributes.normal.array,h=n.ammoIndexAssociation,l=h.length,c=o.get_m_nodes(),u=0;u<l;u++)for(var _=c.at(u),p=_.get_m_x(),m=p.x(),d=p.y(),f=p.z(),v=_.get_m_n(),g=v.x(),y=v.y(),b=v.z(),S=h[u],w=0,x=S.length;w<x;w++){var C=S[w];s[C]=m,a[C]=g,C++,s[C]=d,a[C]=y,C++,s[C]=f,a[C]=b}n.attributes.position.needsUpdate=!0,n.attributes.normal.needsUpdate=!0}for(var t=0,r=this.rigidBodies.length;t<r;t++){var A=this.rigidBodies[t],M=A.userData.physicsBody,T=M.getMotionState();if(T){T.getWorldTransform(this.transformAux1);var R=this.transformAux1.getOrigin(),P=this.transformAux1.getRotation();A.position.set(R.x(),R.y(),R.z()),A.quaternion.set(P.x(),P.y(),P.z(),P.w())}}}},e.prototype.applyForce=function(e,t){var r=Ammo.btVector3(t.x,t.y,t.z);e.applyForce(r,Ammo.btVector3(0,0,0))},e.prototype.setLinearVelocity=function(e,t){var r=Ammo.btVector3(t.x,t.y,t.z);e.setLinearVelocity(r)},e.prototype.clearUp=function(e){this.clearing=!0;var t,r,i=[],n=[];for(t=0;t<this.rigidBodies.length;t++)r=this.rigidBodies[t].userData.physicsBody,e.indexOf(r)<0?(this.physicsWorld.removeRigidBody(r),r=null,this.rigidBodies[t]=null):i.push(e[e.indexOf(r)]);for(t=0;t<this.softBodies.length;t++)r=this.softBodies[t].userData.physicsBody,e.indexOf(r)<0?(this.physicsWorld.removeSoftBody(r),r=null,this.softBodies[t]=null):n.push(e[e.indexOf(r)]);this.rigidBodies=i,this.softBodies=n,this.clearing=!1},e.ctorParameters=function(){return[]},e}()},81:function(e,t,r){"use strict";var i=r(26),n=r(367),o=(r.n(n),r(130));r.d(t,"a",function(){return s});var s=function(){function e(e){this.utils=e,this.radius=20,this.angle=0,this.speed=.05,this.fieldOfView=75,this.nearClippingPane=.1,this.farClippingPane=1100}return e.prototype.create=function(e,t){this.scene=e,this.camera=new i.PerspectiveCamera(this.fieldOfView,t.clientWidth/t.clientHeight,this.nearClippingPane,this.farClippingPane),this.camera.position.set(-7,5,8),this.cameraTarget=new i.Vector3(0,0,0),this.camera.lookAt(this.cameraTarget),this.controls=new n.OrbitControls(this.camera),this.controls.target=this.cameraTarget},e.prototype.update=function(){this.camera.updateProjectionMatrix()},e.prototype.animate=function(e){},e.ctorParameters=function(){return[{type:o.a}]},e}()},82:function(e,t,r){"use strict";var i=r(26);r.d(t,"a",function(){return n});var n=function(){function e(){this.enableLightHelpers=!1,this.shadowMapSize=1024}return e.prototype.create=function(e){this.scene=e,this.scene.add(new i.AmbientLight(11250603)),this.light=new i.DirectionalLight(16777215,1),this.light.position.set(-10,10,0),this.light.castShadow=!0,this.light.shadow.mapSize.width=this.shadowMapSize,this.light.shadow.mapSize.height=this.shadowMapSize,this.light.shadowCameraLeft=-50,this.light.shadowCameraRight=50,this.light.shadowCameraTop=50,this.light.shadowCameraBottom=-50,this.light.shadowCameraNear=0,this.light.shadowCameraFar=1e3,this.light.lookAt(new i.Vector3(0,0,0)),this.scene.add(this.light),this.enableLightHelpers&&this.light.add(new i.DirectionalLightHelper(this.light,1))},e.prototype.animate=function(){},e.ctorParameters=function(){return[]},e}()},83:function(e,t,r){"use strict";var i=r(26),n=r(48),o=r(130);r.d(t,"a",function(){return s});var s=function(){function e(e,t){this.utils=e,this.physicsService=t,this.pos=new i.Vector3,this.quat=new i.Quaternion,this.jsonLoader=new i.JSONLoader,this.s={mass:1,softmass:15,pressure:120,friction:.1,damping:.01,stiffness:.9},this.s2={mass:.5},this.activeScene=1,this.sceneOne=1,this.sceneTwo=2,this.maxMeshes=50,this.meshes=[],this.spawnTime=3,this.deltaCounter=0,this.doNotClearUp=[]}return e.prototype.create=function(e){var t=this;this.scene=e,this.pos.set(0,-.5,0),this.quat.set(0,90*Math.PI/180,0,1);var r=this.physicsService.createParalellepiped(200,1,200,0,this.pos.clone(),this.quat.clone(),new i.MeshStandardMaterial({color:16777215,roughness:1,metalness:0}));r.castShadow=!0,r.receiveShadow=!0,r.position.copy(this.pos),r.rotation.set(this.quat.x,this.quat.y,this.quat.z),this.doNotClearUp.push(r),this.jsonLoader.load("sofa/assets/sofa_simple.json",function(e){t.sofaGeo=e})},e.prototype.animate=function(e){if(this.deltaCounter+=e,this.deltaCounter>=this.spawnTime)switch(this.deltaCounter=0,this.activeScene){case this.sceneOne:this.physicsService.changeGravity(-9.8),this.sceneOneAnimate();break;case this.sceneTwo:this.physicsService.changeGravity(-1.568),this.sceneTwoAnimate()}},e.prototype.switchScene=function(e){this.clearUp(),this.activeScene=e},e.prototype.clearUp=function(){for(var e=0;e<this.meshes.length;e++)this.scene.remove(this.meshes[e]);this.meshes=[],this.physicsService.clearUp(this.doNotClearUp)},e.prototype.sceneOneAnimate=function(){if(this.meshes.length>this.maxMeshes)this.clearUp();else{var e=100,t=this.utils.randomIntFromInterval(1,e);this.pos.set(this.utils.randomIntFromInterval(-5,5),20,this.utils.randomIntFromInterval(-5,5)),this.quat.set(this.utils.randomIntFromInterval(0,360)*Math.PI/180,this.utils.randomIntFromInterval(0,360)*Math.PI/180,this.utils.randomIntFromInterval(0,360)*Math.PI/180,1);var r=new i.Mesh(this.sofaGeo,new i.MeshPhongMaterial({color:this.utils.rainbow(e,t),transparent:!0}));r.castShadow=!0,r.receiveShadow=!0,r.position.copy(this.pos),r.rotation.set(this.quat.x,this.quat.y,this.quat.z),this.physicsService.createFromJson(r,null,this.s.mass,this.pos.clone(),this.quat.clone()),this.meshes.push(r),this.scene.add(r)}},e.prototype.sceneTwoAnimate=function(){if(this.meshes.length>this.maxMeshes)this.clearUp();else{var e=100,t=this.utils.randomIntFromInterval(1,e);this.pos.set(this.utils.randomIntFromInterval(-5,5),20,this.utils.randomIntFromInterval(-5,5)),this.quat.set(this.utils.randomIntFromInterval(0,360)*Math.PI/180,this.utils.randomIntFromInterval(0,360)*Math.PI/180,this.utils.randomIntFromInterval(0,360)*Math.PI/180,1);var r=new i.Mesh(this.sofaGeo,new i.MeshPhongMaterial({color:this.utils.rainbow(e,t),transparent:!0}));r.castShadow=!0,r.receiveShadow=!0,r.position.copy(this.pos),r.rotation.set(this.quat.x,this.quat.y,this.quat.z),this.physicsService.createFromJson(r,null,this.s.mass,this.pos.clone(),this.quat.clone()),this.meshes.push(r),this.scene.add(r)}},e.ctorParameters=function(){return[{type:o.a},{type:n.a}]},e}()}},[369]);